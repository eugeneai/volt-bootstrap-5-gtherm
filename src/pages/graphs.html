<!--

=========================================================
* Volt Pro - Premium Bootstrap 5 Dashboard
=========================================================

* Product Page: https://themesberg.com/product/admin-dashboard/volt-bootstrap-5-dashboard
* Copyright 2021 Themesberg (https://www.themesberg.com)
* License (https://themesberg.com/licensing)

* Designed and coded by https://themesberg.com

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. Please contact us to request a removal.

-->
<!DOCTYPE html>
<html lang="en">

<head>
    @@include('./_head.html', {
        "path": "../",
        "title": "Geotherm model parameters defienition"
    })
</head>

<body>

        <!-- NOTICE: You can use the _analytics.html partial to include production code specific code & trackers -->
        @@if (environment === 'production') {
            @@include('./_analytics_body.html')
        }

        @@include('./dashboard/_nav.html', {
            "path": "../"
        })

        @@include('./dashboard/_sidenav.html', {
            "path": "../",
            "page": "graphs"
        })

        <main class="content">

            @@include('./dashboard/_topbar.html', {
                "path": "../"
            })

            <div class="py-4">
                <nav aria-label="breadcrumb" class="d-none d-md-inline-block">
                    <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent">
                        <li class="breadcrumb-item">
                            <a href="#">
                                <svg class="icon icon-xxs" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                            </a>
                        </li>
                        <li class="breadcrumb-item"><a href="#">Geotherm</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Graphs</li>
                    </ol>
                </nav>
                <div class="d-flex justify-content-between w-100 flex-wrap">
                    <div class="mb-3 mb-lg-0">
                        <h1 class="h4">Model results graphs</h1>
                        <p class="mb-0">We used stock Julia/Python Matlab like graphs to show the results.</p>
                    </div>
                    <div hidden="true">
                        <a href="https://themesberg.com/docs/volt-bootstrap-5-dashboard/components/forms/" class="btn btn-outline-gray"><i class="far fa-question-circle me-1"></i> Forms Docs</a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 mb-4">
                    <div class="card border-1 show components-section"
                         id="vue-graph-plots">
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-lg-6 col-sm-6">
                                    <!-- Graph set -->
                                    <div class="mb-4">
                                        <label for="multy-graph">Geotherms for each q0 value</label>
                                        <div v-html="geotherms">
                                            <img src="../assets/img/illustrations/geotherm.svg"
                                                 class="img-fluid" alt="Geotherms result graph">
                                        </div>
                                        <small id="mghelp" class="form-text text-muted">In the legend, each line marked by a q0 value and the depth, where the geotherm crosses the adiabat. </small>
                                    </div>
                                    <div class="mb-4">
                                        <label for="multy-graph">Spline approximation of Chi^2 deviation value</label>
                                        <div v-html="chisquare">
                                            <img src="../assets/img/illustrations/geotherm-chisquare.svg"
                                                 class="img-fluid" alt="Geotherms result graph">
                                        </div>
                                        <small id="mghelp" class="form-text text-muted">Spline approximation of Chi^2 (deviation assessment between measured and calculated values at the same temperature value) approximation. BFGS (a Qusi Newton method) used for figuring the suboptimal value for q0 is used. </small>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-sm-6">
                                    <!-- Form -->
                                    <div class="mb-4">
                                        <label for="multy-graph">The [sub]optimal Geotherm</label>
                                        <div v-html="optimized">
                                            <img src="../assets/img/illustrations/geotherm-opt.svg"
                                                 class="img-fluid" alt="The suboptimal geotherm result graph">
                                        </div>
                                        <small id="mghelp" class="form-text text-muted">A suboptimal q0 aproximation with a spline. </small>
                                    </div>
                                </div>
                        </div>
                </div>
            </div>


            @@include('./dashboard/_footer.html', {
                "path": "../",
                "classes": "bg-dark text-white"
            })
        </main>

        @@include('./_scripts.html', {
        "path": "../"
        })

        <script>
         graphApp = Vue.createApp({
             data() {
                 return {
                     geotherms: "",
                     chisquare: "",
                     optimized: ""
                 };
             },
             mounted() {
                 var vueData = this;
                 let uuid = undefined;
                 if (uuid === undefined) {
                     this.geotherms = '<div class="alert alert-primary" role="alert">Calculate model, and here You get a graphs</div>'
                     this.chisquare = '<div  class="alert alert-primary" role="alert">Calculate model with <button>optimization</button>, and here You get a chi-square assessment.</div>'
                     this.optimized = '<div  class="alert alert-primary" role="alert">Calculate model with <button>optimization</button>, You will get a geotherm graphs for the optimal value.</div>'
                 }
                 uuid = getProjectUUID();
                 if (uuid === undefined) return;
                 axios.post(SA+"project/"+uuid+"/graphs")
                      .then( resp => {
                          js = resp.data;
                          if (js.level < ERROR) {
                              let graphs = js.value;
                              graphs.forEach( gr => {
                                  vueData[gr.key] = gr.figure;
                              });
                          } else {

                          }
                      })
                      .cach( error => {});
             }
         }).mount("#vue-graph-plots");
        </script>

</body>

</html>
